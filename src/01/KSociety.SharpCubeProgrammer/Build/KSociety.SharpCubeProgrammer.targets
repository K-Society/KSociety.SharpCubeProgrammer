<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright Â© K-Society and contributors. All rights reserved. Licensed under the K-Society License. See LICENSE.TXT file in the project root for full license information. -->

<Project ToolsVersion="12.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <ItemGroup Condition=" '$(OS)' == 'WINDOWS_NT' ">
    <Content Include="$(MSBuildThisFileDirectory)..\runtimes\win-x86\native\Programmer\*.dll">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
      <Link>dll\x86\%(FileName)%(Extension)</Link>
      <Visible>false</Visible>
    </Content>
    <Content Include="$(MSBuildThisFileDirectory)..\runtimes\win-x86\native\STLinkUSBDriver.dll">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
      <Link>%(FileName)%(Extension)</Link>
      <Visible>false</Visible>
    </Content>
  </ItemGroup>
  <ItemGroup Condition=" '$(OS)' == 'WINDOWS_NT' ">
    <Content Include="$(MSBuildThisFileDirectory)..\runtimes\win-x64\native\Programmer\*.dll">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
      <Link>dll\x64\%(FileName)%(Extension)</Link>
      <Visible>false</Visible>
    </Content>
    <Content Include="$(MSBuildThisFileDirectory)..\runtimes\win-x64\native\STLinkUSBDriver.dll">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
      <Link>%(FileName)%(Extension)</Link>
      <Visible>false</Visible>
    </Content>
  </ItemGroup>
  <ItemGroup>
    <StFlashLoaderFiles Include="$(MSBuildThisFileDirectory)/../contentFiles/FlashLoader/*.*" />
    <StDataBaseFiles Include="$(MSBuildThisFileDirectory)/../contentFiles/Data_Base/*.*" />
  </ItemGroup>
  <Target Name="CopyStFiles" AfterTargets="Build">
    <Copy SourceFiles="@(StFlashLoaderFiles)" DestinationFolder="$(TargetDir)/st/Programmer/FlashLoader/%(RecursiveDir)" />
    <Copy SourceFiles="@(StDataBaseFiles)" DestinationFolder="$(TargetDir)/st/Data_Base/%(RecursiveDir)" />
  </Target>
  <Target Name="PublishStFiles" AfterTargets="Publish">
    <Copy SourceFiles="@(StFlashLoaderFiles)" DestinationFolder="$(PublishDir)/st/Programmer/FlashLoader/%(RecursiveDir)" />
    <Copy SourceFiles="@(StDataBaseFiles)" DestinationFolder="$(PublishDir)/st/Data_Base/%(RecursiveDir)" />
  </Target>
</Project>
